import{a as A}from"./chunk-SGAVHBYT.js";import"./chunk-G5KA7DMQ.js";import{a as y,d as l,f as F,g as G,l as P,m as M,n as E,p as N,r as V}from"./chunk-6MPYJHED.js";import{g as w}from"./chunk-RZH2EP4W.js";import"./chunk-LQWHXOTZ.js";import{Bb as f,Gb as e,Hb as o,Ib as u,Lb as v,Qb as C,Rb as m,_b as s,bb as d,gc as b,ha as p,ma as x,ub as g,wa as S,wb as c,xa as h}from"./chunk-CL6NW3CB.js";function T(t,r){if(t&1){let n=v();e(0,"form",2),C("ngSubmit",function(){S(n);let a=m();return h(a.verifyMailSub())}),e(1,"div",3),u(2,"input",4),e(3,"label",5),s(4,"email :"),o()(),e(5,"button",6),s(6,"verify email"),o()()}if(t&2){let n=m();c("formGroup",n.verifyMailGroup)}}function W(t,r){if(t&1){let n=v();e(0,"form",2),C("ngSubmit",function(){S(n);let a=m();return h(a.verifyCodeSub())}),e(1,"div",3),u(2,"input",7),e(3,"label",8),s(4,"code :"),o()(),e(5,"button",6),s(6,"reset code"),o()()}if(t&2){let n=m();c("formGroup",n.resetCodeGroup)}}function B(t,r){if(t&1&&(e(0,"form",1)(1,"div",3),u(2,"input",9),e(3,"label",5),s(4,"email :"),o()(),e(5,"div",3),u(6,"input",10),e(7,"label",11),s(8,"newPassword :"),o()(),e(9,"button",6),s(10,"set new password"),o()()),t&2){let n=m();c("formGroup",n.resetPWGroup)}}var $=(()=>{let r=class r{constructor(){this.steps=1,this._FormBuilder=p(N),this._AuthService=p(A),this._Router=p(w),this.verifyMailGroup=this._FormBuilder.group({email:[null,[l.required,l.email]]}),this.resetCodeGroup=this._FormBuilder.group({code:[null,[l.required,l.pattern(/\w{6}/)]]}),this.resetPWGroup=this._FormBuilder.group({email:[null,[l.required,l.email]],newPassword:[null,[l.required,l.pattern(/^\w{6,}$/)]]})}verifyMailSub(){this._AuthService.postForgetPW(this.verifyMailGroup.value).subscribe({next:i=>{i.statusMsg==="success"&&(this.steps=2)}})}verifyCodeSub(){this._AuthService.postResetCode(this.resetCodeGroup.value).subscribe({next:i=>{i.statusMsg==="success"&&(this.steps=3)}})}resetPWSub(){this._AuthService.postForgetPW(this.resetPWGroup.value).subscribe({next:i=>{i.statusMsg==="success"&&(localStorage.setItem("tokent",i.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"]))}})}};r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=x({type:r,selectors:[["app-forget"]],standalone:!0,features:[b],decls:6,vars:3,consts:[[1,"text-main","text-center","my-2"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"my-2","form-floating"],["type","email","placeholder","email :","id","email","formControlName","email",1,"form-control"],["for","email"],["type","submit",1,"btn","btn-main","ms-auto","d-block"],["formControlName","code","type","text","placeholder","code :","id","code",1,"form-control"],["for","code"],["formControlName","email","type","email","placeholder","email :","id","email",1,"form-control"],["formControlName","newPassword","type","password","placeholder","newPassword :","id","newPassword",1,"form-control"],["for","newPassword"]],template:function(a,_){a&1&&(e(0,"h1",0),s(1,"forget password"),o(),e(2,"section"),g(3,T,7,1,"form",1)(4,W,7,1,"form",1)(5,B,11,1,"form",1),o()),a&2&&(d(3),f(3,_.steps===1?3:-1),d(),f(4,_.steps===2?4:-1),d(),f(5,_.steps===3?5:-1))},dependencies:[V,P,y,F,G,M,E]});let t=r;return t})();export{$ as ForgetComponent};
