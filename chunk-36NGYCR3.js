import{a as W}from"./chunk-J2YMO6TD.js";import"./chunk-G5KA7DMQ.js";import{c as P,d as U}from"./chunk-ITMMMUVJ.js";import{a as V,d as f,f as D,g as R,l as Q,m as q,n as j,p as z,r as O}from"./chunk-VRG7QB65.js";import{g as N,h as A}from"./chunk-MRMYIGZL.js";import{j as M}from"./chunk-7RJWTQJR.js";import{$b as w,Bb as _,Gb as o,Hb as l,Ib as g,Lb as E,Qb as L,Rb as C,Wb as T,Xb as I,Yb as B,_b as a,ac as m,bb as e,gc as F,ha as h,jc as y,ma as k,mc as u,nc as d,ub as x,wa as b,wb as v,xa as G}from"./chunk-CL6NW3CB.js";var H=["keepMe"],$=(i,r)=>({"is-valid":i,"is-invalid":r});function J(i,r){i&1&&g(0,"i",15)}function K(i,r){if(i&1&&(o(0,"p",16),a(1),l()),i&2){let S=C();e(),m(" ",S.msgErr,"")}}function X(i,r){if(i&1&&(o(0,"p",17),a(1),l()),i&2){let S=C();e(),m(" ",S.msgSuccess,"")}}var pe=(()=>{let r=class r{constructor(){this._FormBuilder=h(z),this._AuthService=h(W),this._Router=h(N),this.isLoading=!1,this.loginGroup=this._FormBuilder.group({email:[null,[f.email,f.required]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]]})}login(){this.loginGroup.valid?(this.isLoading=!0,this.loginSubscripe=this._AuthService.setLogin(this.loginGroup.value).subscribe({next:p=>{this.isLoading=!1,p.message==="success"&&(this.msgSuccess="login success Welocome",this.keepMe.nativeElement.checked?localStorage.setItem("userToken",p.token):sessionStorage.setItem("userToken",p.token),this._AuthService.saveUserData(),setTimeout(()=>{this._Router.navigate(["/home"])},2e3))},error:p=>{this.msgErr=p.error.message,this.isLoading=!1,setTimeout(()=>{this.msgErr=""},5e3)}})):this.loginGroup.markAllAsTouched()}ngOnDestroy(){this.loginSubscripe?.unsubscribe()}};r.\u0275fac=function(c){return new(c||r)},r.\u0275cmp=k({type:r,selectors:[["app-login"]],viewQuery:function(c,t){if(c&1&&T(H,5),c&2){let n;I(n=B())&&(t.keepMe=n.first)}},standalone:!0,features:[F],decls:34,vars:33,consts:[["keepMe",""],[1,"p-2","my-4"],[1,"h2","text-main","text-capitalize"],[3,"ngSubmit","formGroup"],[1,"my-2","form-floating"],["id","email","type","email","placeholder","email :","formControlName","email",1,"form-control",3,"ngClass"],["for","email"],["id","password","type","password","formControlName","password","placeholder","password :",1,"form-control",3,"ngClass"],["for","password"],[1,"d-flex","justify-content-between","align-items-center"],[1,"ms-2"],["routerLink","/forget",1,"link-primary","cr","text-decoration-underline"],["id","keepMe","type","checkbox",1,"cr"],["for","keepMe",1,"ms-1","cr"],["type","submit",1,"btn-main","me-1"],[1,"fa","fa-spinner","fa-spin"],[1,"alert","alert-danger","mt-1","w-50","mx-auto","text-center"],[1,"alert","alert-success","mt-1","w-50","mx-auto","text-center"]],template:function(c,t){if(c&1){let n=E();o(0,"section",1)(1,"h1",2),a(2),u(3,"translate"),l(),o(4,"form",3),L("ngSubmit",function(){return b(n),G(t.login())}),o(5,"div",4),g(6,"input",5),o(7,"label",6),a(8),u(9,"translate"),l()(),o(10,"div",4),g(11,"input",7),o(12,"label",8),a(13),u(14,"translate"),l()(),o(15,"div",9)(16,"div",10)(17,"p"),a(18),u(19,"translate"),o(20,"a",11),a(21),u(22,"translate"),l()(),g(23,"input",12,0),o(25,"label",13),a(26),u(27,"translate"),l()(),o(28,"button",14),a(29),u(30,"translate"),x(31,J,1,0,"i",15),l()(),x(32,K,2,1,"p",16)(33,X,2,1,"p",17),l()()}if(c&2){let n,s;e(2),m("",d(3,13,"login.login")," :"),e(2),v("formGroup",t.loginGroup),e(2),v("ngClass",y(27,$,!((n=t.loginGroup.get("email"))!=null&&n.errors)&&((n=t.loginGroup.get("email"))==null?null:n.touched),((n=t.loginGroup.get("email"))==null?null:n.errors)&&((n=t.loginGroup.get("email"))==null?null:n.touched))),e(2),m("",d(9,15,"login.email")," :"),e(3),v("ngClass",y(30,$,!((s=t.loginGroup.get("password"))!=null&&s.errors)&&((s=t.loginGroup.get("password"))==null?null:s.touched),((s=t.loginGroup.get("password"))==null?null:s.errors)&&((s=t.loginGroup.get("password"))==null?null:s.touched))),e(2),m("",d(14,17,"login.password")," :"),e(5),m("",d(19,19,"login.forget your password")," "),e(3),w(d(22,21,"login.click here to reset")),e(5),w(d(27,23,"login.keep me logging in")),e(3),m("",d(30,25,"login.login")," "),e(2),_(31,t.isLoading?31:-1),e(),_(32,t.msgErr?32:-1),e(),_(33,t.msgSuccess?33:-1)}},dependencies:[O,Q,V,D,R,q,j,M,A,U,P]});let i=r;return i})();export{pe as LoginComponent};
