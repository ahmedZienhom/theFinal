import{a as rt}from"./chunk-54B7CU2L.js";import{a as Y,b as Z}from"./chunk-5QWPBLYT.js";import{n as it,o as nt}from"./chunk-NRNWZBTN.js";import{c as tt,d as et}from"./chunk-ITMMMUVJ.js";import{a as R,f as q,k as K,q as X}from"./chunk-6MPYJHED.js";import{h as Q}from"./chunk-RZH2EP4W.js";import{B as h,q as J,w as G}from"./chunk-LQWHXOTZ.js";import{$b as d,Bb as I,Cb as V,Eb as L,Fa as k,Fb as b,Gb as s,Hb as c,Ib as _,Lb as y,Qb as x,Rb as p,Ub as B,Za as O,_b as m,ba as M,bb as a,bc as $,cc as j,dc as A,ec as N,gc as H,ha as l,hc as U,ic as D,ma as F,mc as u,nc as C,oc as W,pa as v,ub as w,wa as g,wb as S,xa as f,yb as z}from"./chunk-CL6NW3CB.js";var ot=(()=>{let t=class t{constructor(){this._HttpClient=l(G),this.wishList=[]}addProductWish(e){return this._HttpClient.post(`${h.baseUrl}/api/v1/wishlist`,{productId:e})}removeProductWish(e){return this._HttpClient.delete(`${h.baseUrl}/api/v1/wishlist/${e}`)}getWishList(){return this._HttpClient.get(`${h.baseUrl}/api/v1/wishlist`)}isInWish(e){return this.wishList.includes(e)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var at=(()=>{let t=class t{transform(e,i=3){return e.split(" ",i).join(" ")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=v({name:"split",type:t,pure:!0,standalone:!0});let r=t;return r})();var st=(()=>{let t=class t{transform(e,i){let o=e.filter(T=>T.title.toLowerCase().includes(i.toLocaleLowerCase()));return o.length!==0?o:e}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=v({name:"search",type:t,pure:!0,standalone:!0});let r=t;return r})();var ct=(r,t)=>t.id,lt=r=>["/details",r],pt=()=>[1,2,3,4,5];function mt(r,t){r&1&&_(0,"i",15)}function dt(r,t){r&1&&_(0,"i",16)}function ut(r,t){if(r&1){let n=y();s(0,"div",2)(1,"div",5)(2,"i",6),x("click",function(){g(n);let i=p();return f(i.emitIt())})("click",function(){let i=g(n).$implicit,o=p();return f(o.toggleWish(i._id))}),c(),s(3,"div",7),_(4,"img",8),s(5,"div",9)(6,"h3",10),m(7),c(),s(8,"span",11),m(9),c()(),s(10,"h4",12),m(11),u(12,"split"),c(),s(13,"div",9)(14,"span"),m(15),u(16,"currency"),c(),s(17,"span",13)(18,"span",14),L(19,mt,1,0,"i",15,V),w(21,dt,1,0,"i",16),c(),_(22,"i",17),m(23),c()()(),s(24,"button",18),x("click",function(){let i=g(n).$implicit,o=p();return f(o.addProductToCart(i._id))}),m(25),u(26,"translate"),c()()()}if(r&2){let n=t.$implicit,e=p();a(2),z("text-danger",e.isInWish(n._id)),a(),S("routerLink",D(20,lt,n._id)),a(),S("src",n.imageCover,O)("alt",n.title),a(3),d(n.category.name),a(2),d(n.brand.name),a(2),d(C(12,13,n.title)),a(4),d(W(16,15,n.price,"EGP")),a(4),b(U(22,pt).slice(0,n.ratingsAverage)),a(2),I(21,n.ratingsAverage%1!==0?21:-1),a(2),$(" ",n.ratingsAverage," (",n.ratingsQuantity,")"),a(2),d(C(26,18,"pl.add to cart"))}}function ht(r,t){if(r&1){let n=y();s(0,"mat-paginator",19),x("page",function(i){g(n);let o=p();return f(o.onPageChanged(i))}),c()}if(r&2){let n=p();S("length",n.totalItems)("pageSize",n.pageSize)("pageIndex",n.currentPage)("hidePageSize",n.hidePageSize)}}var Nt=(()=>{let t=class t{constructor(){this.itemEvent=new k(!1),this._CartService=l(it),this._ToastrService=l(nt),this._ProductsService=l(rt),this._WishService=l(ot),this.search="",this.hidePageSize=!0,this.productsbool=window.location.href===`${h.url}products`}ngOnInit(){this.productsbool&&this._ProductsService.getAllProducts().subscribe({next:e=>{this.pageSize=e.metadata.limit,this.currentPage=e.metadata.currentPage-1,this.totalItems=e.results}}),localStorage.getItem("wishList")&&(this._WishService.wishList=JSON.parse(localStorage.getItem("wishList")))}addProductToCart(e){this._CartService.addToCart(e).subscribe({next:i=>{this._CartService.cartNumber.next(i.numOfCartItems),this._ToastrService.success(`${i.message}`,"",{closeButton:!0,timeOut:2e3,progressBar:!0})}})}onPageChanged(e){this._ProductsService.getAllProducts(e.pageIndex+1).subscribe({next:i=>{this.productsList=i.data}})}toggleWish(e){this._WishService.isInWish(e)?this._WishService.removeProductWish(e).subscribe({next:i=>{this._WishService.wishList=i.data,localStorage.setItem("wishList",JSON.stringify(this._WishService.wishList)),this.itemEvent.emit(!0)}}):this._WishService.addProductWish(e).subscribe({next:i=>{this._WishService.wishList=i.data,localStorage.setItem("wishList",JSON.stringify(this._WishService.wishList)),this.itemEvent.emit(!0)}})}emitIt(){this.itemEvent.emit(!0)}isInWish(e){return this._WishService.isInWish(e)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=F({type:t,selectors:[["app-products-list"]],inputs:{productsList:"productsList",limit:"limit"},outputs:{itemEvent:"itemEvent"},standalone:!0,features:[H],decls:8,vars:8,consts:[["type","search",1,"form-control","mx-auto","w-50","my-3",3,"ngModelChange","placeholder","ngModel"],[1,"row","g-3"],[1,"col-6","col-md-3","col-lg-2"],[1,"mx-auto","w-50"],["aria-label","Select page",3,"length","pageSize","pageIndex","hidePageSize"],[1,"product","border-0","p-2","position-relative"],[1,"cr","fa","fa-heart","position-absolute","anime","fa-xl",3,"click"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-between"],[1,"small"],[1,"small","text-main"],[1,"h6"],[1,"text-muted"],[1,"d-lg-inline","none"],[1,"fa","fa-star","rating-color"],[1,"fa","fa-star-half","rating-color"],[1,"fa","fa-star","rating-color","d-lg-none"],[1,"w-100","btn","btn-main",3,"click"],["aria-label","Select page",3,"page","length","pageSize","pageIndex","hidePageSize"]],template:function(i,o){i&1&&(s(0,"input",0),u(1,"translate"),N("ngModelChange",function(P){return A(o.search,P)||(o.search=P),P}),c(),s(2,"div",1),L(3,ut,27,23,"div",2,ct),u(5,"search"),c(),s(6,"div",3),w(7,ht,1,4,"mat-paginator",4),c()),i&2&&(B("placeholder",C(1,3,"pl.search for product by name...")),j("ngModel",o.search),a(3),b(W(5,5,o.productsList.slice(0,o.limit),o.search)),a(4),I(7,o.productsbool?7:-1))},dependencies:[Q,J,at,X,R,q,K,st,et,tt,Z,Y],styles:[".anime[_ngcontent-%COMP%]{right:-20%;top:10%;transition:all .3s}.product[_ngcontent-%COMP%]:hover   .anime[_ngcontent-%COMP%]{right:10%}@media screen and (max-width: 768px){.anime[_ngcontent-%COMP%]{right:10%}}.none[_ngcontent-%COMP%]{display:none}"]});let r=t;return r})();export{ot as a,Nt as b};
