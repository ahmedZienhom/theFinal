import{a as G}from"./chunk-KDFA2LVT.js";import"./chunk-G5KA7DMQ.js";import{c as V,d as D}from"./chunk-ITMMMUVJ.js";import{a as E,d as v,f as A,g as F,l as N,m as q,n as R,p as w,r as M}from"./chunk-VRG7QB65.js";import{e as T,g as B}from"./chunk-MRMYIGZL.js";import"./chunk-7RJWTQJR.js";import{$b as c,Bb as h,Gb as i,Hb as r,Ib as p,Qb as S,Rb as I,_b as l,ac as _,bb as t,gc as O,ha as u,ma as b,mc as a,nc as d,ub as f,wb as y}from"./chunk-CL6NW3CB.js";function z(e,o){e&1&&(i(0,"div",5)(1,"p"),p(2,"i",13),l(3),a(4,"translate"),r()()),e&2&&(t(3),_(" ",d(4,1,"orders.this input is requird")," "))}function H(e,o){e&1&&(i(0,"p"),p(1,"i",13),l(2),a(3,"translate"),r()),e&2&&(t(2),_(" ",d(3,1,"orders.this input is requird")," "))}function j(e,o){e&1&&(i(0,"p"),p(1,"i",13),l(2),a(3,"translate"),r()),e&2&&(t(2),_(" ",d(3,1,"orders.enter a valid egyptian phone")," "))}function P(e,o){if(e&1&&(i(0,"div",5),f(1,H,4,3,"p")(2,j,4,3),r()),e&2){let k,n=I();t(),h(1,(k=n.order.get("phone"))!=null&&k.getError("required")?1:2)}}function $(e,o){e&1&&(i(0,"div",5)(1,"p"),p(2,"i",13),l(3),a(4,"translate"),r()()),e&2&&(t(3),_(" ",d(4,1,"orders.this input is requird")," "))}var ee=(()=>{let o=class o{constructor(){this._FormBuilder=u(w),this._ActivatedRoute=u(T),this._OrderService=u(G),this._Router=u(B),this.visa=!0,this.order=this._FormBuilder.group({details:[null,[v.required]],phone:[null,[v.required,v.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[v.required]]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:n=>{this.cartId=n.get("id")}})}checkItVisa(){this.order.valid?this._OrderService.checkOut(this.cartId,this.order.value).subscribe({next:n=>{n.status==="success"&&localStorage.getItem("userToken")?window.open(n.session.url,"_self"):n.status==="success"&&sessionStorage.getItem("userToken")&&window.open(n.session.url,"_blank")}}):this.order.markAllAsTouched()}checkItHome(){this.order.valid?this._OrderService.checkOutHome(this.cartId,this.order.value).subscribe({next:n=>{n.status==="success"&&this._Router.navigate(["/allorders"])}}):this.order.markAllAsTouched()}};o.\u0275fac=function(x){return new(x||o)},o.\u0275cmp=b({type:o,selectors:[["app-orders"]],standalone:!0,features:[O],decls:30,vars:22,consts:[[1,"text-capitalize","text-center"],[1,"w-75","mx-auto","my-3",3,"formGroup"],[1,"form-floating","my-2"],["formControlName","details","type","text","id","details","placeholder","adress details",1,"form-control"],["for","details"],[1,"text-danger","ms-2"],["formControlName","phone","type","tel","id","phone","placeholder","contact phone",1,"form-control"],["for","phone"],["formControlName","city","type","text","id","city","placeholder","city",1,"form-control"],["for","city"],[1,"d-flex","align-items-center","justify-content-around","mt-3"],[1,"btn-outline-success","d-block","fs-4","btn","text-capitalize",3,"click"],[1,"btn-success","d-block","fs-4","btn","text-capitalize",3,"click"],[1,"fa-solid","fa-xmark"]],template:function(x,s){if(x&1&&(i(0,"section")(1,"h1",0),l(2),a(3,"translate"),r(),i(4,"form",1)(5,"div",2),p(6,"input",3),i(7,"label",4),l(8),a(9,"translate"),r()(),f(10,z,5,3,"div",5),i(11,"div",2),p(12,"input",6),i(13,"label",7),l(14),a(15,"translate"),r()(),f(16,P,3,1,"div",5),i(17,"div",2),p(18,"input",8),i(19,"label",9),l(20),a(21,"translate"),r()(),f(22,$,5,3,"div",5),i(23,"div",10)(24,"button",11),S("click",function(){return s.checkItVisa()}),l(25),a(26,"translate"),r(),i(27,"button",12),S("click",function(){return s.checkItHome()}),l(28),a(29,"translate"),r()()()()),x&2){let m,g,C;t(2),c(d(3,10,"orders.shepping address")),t(2),y("formGroup",s.order),t(4),c(d(9,12,"orders.adress details")),t(2),h(10,(m=s.order.get("details"))!=null&&m.errors&&((m=s.order.get("details"))!=null&&m.touched)?10:-1),t(4),c(d(15,14,"orders.contact phone")),t(2),h(16,(g=s.order.get("phone"))!=null&&g.errors&&((g=s.order.get("phone"))!=null&&g.touched)?16:-1),t(4),c(d(21,16,"orders.city")),t(2),h(22,(C=s.order.get("city"))!=null&&C.errors&&((C=s.order.get("city"))!=null&&C.touched)?22:-1),t(3),c(d(26,18,"orders.visa check out")),t(3),c(d(29,20,"orders.pay at home"))}},dependencies:[M,N,E,A,F,q,R,D,V]});let e=o;return e})();export{ee as OrdersComponent};
